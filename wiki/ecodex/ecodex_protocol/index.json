{
  "reference": {
    "path": "wiki/ecodex",
    "baseUrl": "/ecodex",
    "fileName": "ecodex_protocol",
    "extension": "html",
    "usePrettyUrl": true,
    "link": "/ecodex/wiki/ecodex/ecodex_protocol"
  },
  "next": {
    "path": "wiki/ecodex",
    "baseUrl": "/ecodex",
    "fileName": "example_deployment",
    "extension": "html",
    "usePrettyUrl": true,
    "link": "/ecodex/wiki/ecodex/example_deployment"
  },
  "data": {},
  "description": "",
  "title": "e-Codex Protocol specification",
  "content": "<div class=\"sect1\">\n<h2 id=\"_abstract\">Abstract<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>e-Codex is a collection of different protocols and standards and is tying them together.\nOne of the main goals of e-Codex is the secure and and traceable transport of digital documents.\nFor this purpose e-Codex is built on top of AS4.<\/p>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_specifications_of_requirements\">Specifications of Requirements<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\",\n\"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this\ndocument are to be interpreted as described in [RFC2119].<\/p>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_status_of_this_document\">Status of this document<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>This document is currently work in progress and should describe e-Codex in a detailed fashion to\nhelp other developers to implement it.<\/p>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_copyright_notice\">Copyright Notice<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>This document is released under the EUPL license, but only the e-Codex consortium is allowed to\npublish new releases of the e-Codex standard! So any modifications must change the document title so\nit&#8217;s clear that it is not an official version.<\/p>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_introduction\">Introduction<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Within the judicial domain it becomes more likely that cases are international. A lot of countries\nalready have national systems to manage and trace digital received documents. But this systems\nare unable to communicate with each other in a cross border manner. E-Codex is offering an approach\nto address the technical problems which are occuring in transporting documents digitally between\ndifferent systems.<\/p>\n<\/div>\n<div class=\"paragraph\">\n<p>The judicially domain as an urgent need to always proove the authenticity of a document and\nalso proove when the document has entered the disposal area of a specific authority.<\/p>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_message_flow\">Message Flow<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The e-Codex message flow is business case driven. Multiple business messages related to each other\nshould grouped by the usage of the same conversationId. The conversationId must be a generic key\nand must not contain any sensible information.<\/p>\n<\/div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>sending system<\/p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>SUBMISSION_ACCEPTANCE should be created if the message is considered valid<\/p>\n<\/li>\n<li>\n<p>SUBMISSION_REJECTION should be created if the message is not a valid e-Codex or contains any information which makes it obvious for\nthe sending system that this message will not be accepted by the receiving system.<\/p>\n<\/li>\n<li>\n<p>RELAY_REMMD_FAILURE should be created if the configured timeout was reached and no evidence of the type RELAY_REMMD_ACCEPTANCE,\nDELIVERY_ACCEPTANCE, DELIVERY_REJECTION, RETRIEVAL_ACCEPTANCE, RETRIEVAL_REJECTION has been received.<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/li>\n<li>\n<p>receiving system<\/p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>RELAY_REMMD_ACCEPTANCE should be created if the message is received at the new domain and can be processed and passed to the\nnext relaying system or target system.<\/p>\n<\/li>\n<li>\n<p>RELAY_REMMD_REJECTION should be created if the message cannot be processed or passed to the next relaying system or target system.<\/p>\n<\/li>\n<li>\n<p>DELIVERY should be created if the message was successfully passed to the target system. The DELIVERY_ACCEPTANCE should\nbe generated accordingly to the national law when the message has been legally passed to the receiving authority.\nThe usage and meaning of the DELIVERY should be defined within the business case.<\/p>\n<\/li>\n<li>\n<p>NON_DELIVERY should be created if the message cannot be passed to the target system, authority, or even when the\nacceptance of the message is denied due formal reasons. The usage and meaning of the NON_DELIVERY should be\ndefined within the business case.<\/p>\n<\/li>\n<li>\n<p>RETRIEVAL may be created if the message has been seen by the processing system, user, human, The usage and meaning of the RETRIEVAL\nshould be defined within the business case.<\/p>\n<\/li>\n<li>\n<p>NON_RETRIEVAL may be created if the message has not been seen by the processing system, user human within a given time period.\nThe usage and meaning of the NON_RETRIEVAL should be defined within the business case.<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_asic_s_container_format\">Asic-S Container Format<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>As the content is packaged into the ASIC-S container. The ASIC-S container format itself is described\nat <a href=\"http://www.etsi.org/deliver/etsi_ts/103100_103199/103174/02.02.01_60/ts_103174v020201p.pdf\" class=\"bare\">http://www.etsi.org/deliver/etsi_ts/103100_103199/103174/02.02.01_60/ts_103174v020201p.pdf<\/a><\/p>\n<\/div>\n<div class=\"paragraph\">\n<p>The following documents are part of the ASIC-S container:<\/p>\n<\/div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>A business document of any name.<\/p>\n<\/li>\n<li>\n<p>Attachments<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_token_xml_format\">Token.xml format<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The token must be generated by the sending e-Codex system. It must be signed with a certificate which\nis valid in the e-codex environment.<\/p>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_evidences\">Evidences<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>To track the message during the way through the different systems the message processing points\nmust generate ETSI-REM evidences. The evidences are always generated and processed in the xml-format.<\/p>\n<\/div>\n<div class=\"paragraph\">\n<p>TODO: describe evidences in more detail, link the ETSI document.<\/p>\n<\/div>\n<div class=\"paragraph\">\n<p>The following evidences must be supported by an e-Codex system. The messages are\ndistinguished in the good case and the error or fault case. For the different cases\nthe evidences are named differently in UPPER-CASE letters according to the following list:<\/p>\n<\/div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>SubmissionAcceptanceRejection<\/p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>SUBMISSION_ACCEPTANCE<\/p>\n<\/li>\n<li>\n<p>SUBMISSION_REJECTION<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/li>\n<li>\n<p>RelayToREMMDAcceptanceRejection<\/p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>RELAY_REMMD_ACCEPTANCE<\/p>\n<\/li>\n<li>\n<p>RELAY_REMMD_REJECTION<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/li>\n<li>\n<p>RelayToREMMDFailure<\/p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>RELAY_REMMD_FAILURE<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/li>\n<li>\n<p>DeliveryNonDeliveryToRecipient<\/p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>DELIVERY<\/p>\n<\/li>\n<li>\n<p>NON_DELIVERY<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/li>\n<li>\n<p>RetrievalNonRetrievalByRecipient<\/p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>RETRIEVAL<\/p>\n<\/li>\n<li>\n<p>NON_RETRIEVAL<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_evidences_handling\">Evidences handling<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>A message with an SUBMISSION_REJECTION should not leave the sending system. If a message with an SUBMISSION_REJECTION\nis received by an receiving system the system must ignore it. Any following messages or\nevidences to this message must be ignored.<\/p>\n<\/div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\">Note<\/div>\n<\/td>\n<td class=\"content\">\nThis means that the receiving system must track at least the message metadata and evidences itself to be able to track the assocation between the messages.\n<\/td>\n<\/tr>\n<\/table>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_as4_message_formatstructure\">AS4 Message Format/Structure<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Within e-Codex the messages are exchanged over AS4. The e-Codex messages are transported\nwith the e-SENS AS4 profile. <a href=\"https://ec.europa.eu/cefdigital/wiki/display/CEFDIGITAL/e-SENS+AS4+-+1.12\" class=\"bare\">https://ec.europa.eu/cefdigital/wiki/display/CEFDIGITAL/e-SENS+AS4+-+1.12<\/a><\/p>\n<\/div>\n<div class=\"paragraph\">\n<p>The exchanged messages must have additionally to the e-SENS profile attributes the following structure:<\/p>\n<\/div>\n<div class=\"paragraph\">\n<p>The message properties finalRecipient and originalSender must be set.<\/p>\n<\/div>\n<div class=\"paragraph\">\n<p>There are 2 types of messages. The evidence messages and the business message.<\/p>\n<\/div>\n<div class=\"paragraph\">\n<p>The business message must follow the following rules:<\/p>\n<\/div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>The message must have a payload with the name <em>messageContent<\/em> this content is the business xml and must\nhave the mimeType <em>text/xml<\/em><\/p>\n<\/li>\n<li>\n<p>The message must have a payload with the name <em>container-signed-xades-baseline-b.asics<\/em> this content is the\nASIC-S container it must have the mimeType <em>application/vnd.etsi.asic-s+zip<\/em> and it must be a valid ASIC-S\ne-Codex container.<\/p>\n<\/li>\n<li>\n<p>The message must have a payload with the name <em>Token.xml<\/em> this content must be a valid e-Codex Token.xml\nand must have the mimeType <em>text/xml<\/em><\/p>\n<\/li>\n<li>\n<p>The message should have a payload with the name SUBMISSION_ACCEPTANCE this content\nis a evidence of the type SUBMISSION_ACCEPTANCE with the mimeType <em>text/xml<\/em>.<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<div class=\"paragraph\">\n<p>The confirmationMessage must follow the following rules:<\/p>\n<\/div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>The message must have a payload with the name of the evidence [see evidence chapter]<\/p>\n<\/li>\n<li>\n<p>The AS4 property refToMessageId must be set to the business message ebmsId the evidence was generated for.<\/p>\n<\/li>\n<li>\n<p>The confirmation message must contain only one evidence<\/p>\n<\/li>\n<\/ul>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"sect1\">\n<h2 id=\"_certificates\">Certificates<\/h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Within an e-Codex environment multiple certificates are used. For a valid e-Certificate in an e-Codex environment\nthe certificate must comply to following rules. Any references to CRL or OCSP protocol links or future\nX509 protocols must be reachable within the e-Codex environment. So is the e-Codex system running over a public\nnetwork then the references must also be resolvable over this network.<\/p>\n<\/div>\n<\/div>\n<\/div>"
}